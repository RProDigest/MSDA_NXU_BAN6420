
# Flask Web Application

- Author: Mubanga Nsofu
- Course: BAN6420, Final Project
- Email: mnsofu@learner.nexford.org
- Learner ID: 149050
- Institution: Nexford University
- Lecturer: Prof. R. Wanjiku
- Date: 20th August 2024
- Task: Web Based Survey Tool

Overview

The project involves creating a web based form using a lightweight python web based framework called flask. The user inputs user information such as names, race, age income and expenses. The information is stored in a NoSQL database called MongoDB. Thereafer an R script is used to retrived the key value pairs with the output being stored as a CSV file. Finally, we use a python notebook to visualize the data and save the graphs as a png for a powerpoint presentation.





## What is Flask

Flask is a micro framework that can be used for web applications. It has three main dependencies; routing, debugging and WSGI also called a Web Server Gateway Interface. 
```markdown
## Project Structure

Flask_Application.py
data_processing_script.R
user_data.csv
templates/
  index.html
data_loading_visualization.ipynb
README.md 
```

## What does each file do?

- Flask_Application.py: This is the Flask application file. This will be the first file to be executed which will result in the 'index.html' file being rendered.

- index.html: Holds HTML, CSS and Javascript code for the frontend of the form so that a user can collect the survey data and submit it to the backend mongoDB database. This index file by convention has to be in the templates folder. Should you rename the folder anything else other than templates you will encounter an error.

- data_processing_script.R: This is a script written in R for processing data that has been exported from the MongoDB backend, the script uses R6 classes and exports the data into a final CSV file called user_data.csv. 

- data_loading_visualization.ipynb: This Jupyter Notebook loads the survey dataset called user_data.csv which was generated by the R script and performs some visualisation as a per the requirements. It also saves the images as *.png files for use in powerpoint.

- README.md: The readme file has instruction about the project and how to run the scripts.

## Requirements

Ensure you have the following libraries installed:

- Python 3.12.1 or higher
- MongoDB (installed on your laptop)
- flask
- pandas
- matplotlib
- seaborn
- R 4.4.1 or higher
- pacman


To install all the R packages required, it is recommended to use pacman and run this line of code. You will see this same line of code in the file called <data_processing_script.R>

```r

pacman::p_load(
  R6, # Package for R6 classes
  mongolite, # MongoDB interface for R
  data.table, # Data manipulation package
  jsonlite, # JSON handling package
  tidyverse # Meta package for data science lifcycle
)
```

In addition, ensure you have a local installation of MongoDB.


## Run the code

- Once you have installed all the necessary libraries and loaded them, you can run the code in the following way.

- navigate to the project folder and run this line from the command prompt

```cmd

python .\Flask_Application.py

```

After a few seconds you will see  the following

```cmd
* Serving Flask app 'Flask_Application'
 * Debug mode: on
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5000
Press CTRL+C to quit
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 815-736-474
````

Then copy and paste the following address into your browser

```cmd
http://127.0.0.1:5000
```
If everything has been installed the Flask front end will popup and you will be able to input all the required data in the form and submit the inputs to the MongoDB backend.


Once you have input a couple of users in the form, you can now extract the data using the R script. You can do so by running the following commands in R.

```r
setwd("<Location of the project folder>") 
source("data_processing_script.R")

```
- The first commands sets the working directory to the location of the project folder.

- The second line of code runs the r script that pulls the data from the MongoDB server and writes a file called `user_data.csv`


- Lastly, you can run the Jupyter notebook cell by cell sequentially, which will create the visualizations and *.png files.



In case of any issues please ensure:

1. You have installed all the libraries 
2. You have a local installation of MongoDB
3. Contact the author (details are further below)


## Publishing The Application on AWS

There are a number of steps to publish the application on the colud. In the steps below, I highlight a high level steps of how to do it. For a details tutorial refer to the links further below.

-Install necessary packages on your EC2 instance.
-Set up a virtual environment and install Flask dependencies.
-Upload or clone your Flask app onto the EC2 instance.
-Test the application locally to ensure it works.
-Set up Gunicorn and Nginx to serve your Flask app in a production environment.
-Configure Gunicorn as a systemd service for easy management.
-Access your application via the instance's public IP or domain.

```https
https://www.youtube.com/watch?v=ct1GbTvgVNM

https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create-deploy-python-flask.html


````
## Troubleshooting

For any queries with regards to troubleshooting, please contact the author via email at mnsofu@learner.nexford.org.
## Contact Author

- [@RProDigest](https://www.github.com/RProDigest)
- [@RProDigest](https://www.twitter.com/RProDigest)

